# ============================================================================
# Quantix-OS Kernel Configuration Notes
# ============================================================================
# This file documents kernel options required for Quantix-OS
# We use the stock Alpine LTS kernel which includes all necessary options
# 
# If building a custom kernel, ensure these are enabled:
# ============================================================================

# -----------------------------------------------------------------------------
# Virtualization (KVM)
# -----------------------------------------------------------------------------
# CONFIG_VIRTUALIZATION=y
# CONFIG_KVM=m
# CONFIG_KVM_INTEL=m          # Intel VT-x
# CONFIG_KVM_AMD=m            # AMD-V

# -----------------------------------------------------------------------------
# IOMMU for Device Passthrough
# -----------------------------------------------------------------------------
# CONFIG_IOMMU_SUPPORT=y
# CONFIG_INTEL_IOMMU=y
# CONFIG_INTEL_IOMMU_DEFAULT_ON=y
# CONFIG_AMD_IOMMU=y
# CONFIG_AMD_IOMMU_V2=y

# -----------------------------------------------------------------------------
# VFIO for GPU/Device Passthrough
# -----------------------------------------------------------------------------
# CONFIG_VFIO=m
# CONFIG_VFIO_PCI=m
# CONFIG_VFIO_IOMMU_TYPE1=m
# CONFIG_VFIO_MDEV=m

# -----------------------------------------------------------------------------
# Virtio (Guest Drivers - useful for nested virt testing)
# -----------------------------------------------------------------------------
# CONFIG_VIRTIO=m
# CONFIG_VIRTIO_PCI=m
# CONFIG_VIRTIO_BLK=m
# CONFIG_VIRTIO_NET=m
# CONFIG_VIRTIO_CONSOLE=m
# CONFIG_VIRTIO_BALLOON=m
# CONFIG_VIRTIO_INPUT=m
# CONFIG_VIRTIO_VSOCK=m
# CONFIG_VHOST_VSOCK=m
# CONFIG_VHOST_NET=m

# -----------------------------------------------------------------------------
# Networking (OVS/OVN)
# -----------------------------------------------------------------------------
# CONFIG_BRIDGE=m
# CONFIG_VLAN_8021Q=m
# CONFIG_VXLAN=m
# CONFIG_GENEVE=m
# CONFIG_OPENVSWITCH=m
# CONFIG_TUN=m
# CONFIG_TAP=m
# CONFIG_MACVLAN=m
# CONFIG_MACVTAP=m

# -----------------------------------------------------------------------------
# Storage
# -----------------------------------------------------------------------------
# CONFIG_BLK_DEV_LOOP=m
# CONFIG_BLK_DEV_NBD=m
# CONFIG_DM_MOD=m
# CONFIG_DM_THIN_PROVISIONING=m
# CONFIG_DM_SNAPSHOT=m
# CONFIG_SCSI_ISCSI_ATTRS=m
# CONFIG_ISCSI_TCP=m

# -----------------------------------------------------------------------------
# Filesystems
# -----------------------------------------------------------------------------
# CONFIG_SQUASHFS=m
# CONFIG_SQUASHFS_XZ=y
# CONFIG_OVERLAY_FS=m
# CONFIG_XFS_FS=m
# CONFIG_EXT4_FS=m
# CONFIG_FUSE_FS=m
# CONFIG_VIRTIOFS_FS=m

# -----------------------------------------------------------------------------
# Cgroups v2 (for resource control)
# -----------------------------------------------------------------------------
# CONFIG_CGROUPS=y
# CONFIG_CGROUP_DEVICE=y
# CONFIG_CGROUP_CPUACCT=y
# CONFIG_CGROUP_SCHED=y
# CONFIG_CFS_BANDWIDTH=y
# CONFIG_MEMCG=y
# CONFIG_MEMCG_SWAP=y
# CONFIG_BLK_CGROUP=y

# -----------------------------------------------------------------------------
# Security
# -----------------------------------------------------------------------------
# CONFIG_SECCOMP=y
# CONFIG_SECCOMP_FILTER=y
# CONFIG_SECURITY=y
# CONFIG_LSM="yama,loadpin,safesetid,integrity"

# -----------------------------------------------------------------------------
# Boot Parameters (passed via GRUB, not kernel config)
# -----------------------------------------------------------------------------
# intel_iommu=on          # Enable Intel IOMMU
# amd_iommu=on            # Enable AMD IOMMU  
# iommu=pt                # IOMMU passthrough mode
# default_hugepagesz=1G   # Default huge page size
# hugepagesz=1G           # 1GB huge pages
# hugepages=16            # Number of 1GB pages
# kvm.ignore_msrs=1       # Ignore unknown MSRs (for GPU passthrough)
# modprobe.blacklist=nouveau,nvidiafb  # Blacklist for GPU passthrough
