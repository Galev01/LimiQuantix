# ============================================================================
# Quantix-OS libvirtd Configuration
# ============================================================================
# Minimal configuration for hypervisor operation

# ---------------------------------------------------------------------------
# Network & Listening
# ---------------------------------------------------------------------------

# Listen on local sockets only (no TCP, for security)
listen_tls = 0
listen_tcp = 0

# Unix socket paths
unix_sock_group = "root"
unix_sock_ro_perms = "0777"
unix_sock_rw_perms = "0770"
unix_sock_admin_perms = "0700"

# ---------------------------------------------------------------------------
# Authentication
# ---------------------------------------------------------------------------

# Unix socket authentication (polkit for full access)
auth_unix_ro = "none"
auth_unix_rw = "none"

# ---------------------------------------------------------------------------
# Process Limits
# ---------------------------------------------------------------------------

# Maximum number of concurrent clients
max_clients = 1000
max_workers = 20
max_queued_clients = 1000

# Maximum size of client requests
max_client_requests = 10

# ---------------------------------------------------------------------------
# Logging
# ---------------------------------------------------------------------------

# Log level: 1=DEBUG 2=INFO 3=WARN 4=ERROR
log_level = 3

# Log outputs (file and journald)
log_outputs = "3:file:/var/log/libvirt/libvirtd.log 3:journald"

# Log filters (reduce noise from common modules)
log_filters = "3:remote 4:event 4:json 4:rpc"

# ---------------------------------------------------------------------------
# Security
# ---------------------------------------------------------------------------

# Process DAC driver (for file permission handling)
# Commented out for compatibility - let libvirt auto-detect
# security_driver = "none"

# Clear emulator capabilities for security
clear_emulator_capabilities = 0

# ---------------------------------------------------------------------------
# Timeouts
# ---------------------------------------------------------------------------

# Keepalive interval (seconds)
keepalive_interval = 5
keepalive_count = 5

# Admin keepalive (shorter for responsiveness)
admin_keepalive_interval = 5
admin_keepalive_count = 5
