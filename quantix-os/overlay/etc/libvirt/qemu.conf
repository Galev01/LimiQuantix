# ============================================================================
# Quantix-OS QEMU Configuration
# ============================================================================
# Configuration for QEMU/KVM virtual machines

# ---------------------------------------------------------------------------
# Security
# ---------------------------------------------------------------------------

# Run QEMU as root (required for device passthrough)
user = "root"
group = "root"

# Security driver (disable for simpler setup)
security_driver = "none"

# Don't drop capabilities (needed for passthrough)
clear_emulator_capabilities = 0

# ---------------------------------------------------------------------------
# Memory
# ---------------------------------------------------------------------------

# Allow memory overcommit
# set_process_name = 1

# Huge pages (enabled if configured in node.yaml)
# hugetlbfs_mount = "/dev/hugepages"

# ---------------------------------------------------------------------------
# Namespaces
# ---------------------------------------------------------------------------

# Disable namespaces for simpler operation
namespaces = []

# ---------------------------------------------------------------------------
# Cgroups
# ---------------------------------------------------------------------------

# Cgroup controllers to use
cgroup_controllers = [ "cpu", "devices", "memory", "blkio", "cpuset", "cpuacct" ]

# Cgroup device ACL
cgroup_device_acl = [
    "/dev/null", "/dev/full", "/dev/zero",
    "/dev/random", "/dev/urandom",
    "/dev/ptmx", "/dev/kvm",
    "/dev/rtc", "/dev/hpet",
    "/dev/vfio/vfio"
]

# ---------------------------------------------------------------------------
# VNC/SPICE
# ---------------------------------------------------------------------------

# VNC listen address (localhost only by default)
vnc_listen = "0.0.0.0"
vnc_tls = 0
vnc_sasl = 0

# SPICE listen address
spice_listen = "0.0.0.0"
spice_tls = 0

# ---------------------------------------------------------------------------
# Migration
# ---------------------------------------------------------------------------

# Maximum bandwidth for migration (MB/s)
# migration_bandwidth = 64

# ---------------------------------------------------------------------------
# Logging
# ---------------------------------------------------------------------------

# QEMU log directory
log_timestamp = 1
stdio_handler = "file"

# ---------------------------------------------------------------------------
# Storage
# ---------------------------------------------------------------------------

# Cache modes
# cache = "none"

# ---------------------------------------------------------------------------
# Compatibility - Allow running without KVM
# ---------------------------------------------------------------------------

# If KVM isn't available, QEMU will fall back to TCG (emulation)
# This is slower but allows testing in non-nested environments
