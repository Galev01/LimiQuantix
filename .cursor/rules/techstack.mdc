---
description: Technology stack guidelines for Rust, Go, TypeScript/React, and Update Server. Defines versions, frameworks, libraries, coding styles, and patterns for all code generation across the Quantix-KVM platform.
alwaysApply: true
---

# TECH STACK GUIDELINES

## Rust (Agent & Hypervisor)
- **Edition:** 2021
- **Crates:** Use `tokio` for async, `serde` for serialization, `tonic` for gRPC.
- **Style:** Run `cargo fmt` and `cargo clippy` on every snippet.
- **Error Handling:** Use `thiserror` for libraries and `anyhow` for binaries.

## Go (Control Plane)
- **Version:** 1.25.5
- **Frameworks:** `Gin` or `Chi` for HTTP, `gRPC-Go` for internal comms, `etcd/clientv3`.
- **Style:** Follow `uber-go/guide`.
- **Concurrency:** Never start a goroutine without a way to stop it (Context or Done channel).

## Frontend (Dashboard) - using the UI-Expert rule
- **Framework:** React 19 + Vite + TypeScript.
- **State:** Zustand (global store), TanStack Query (server state).
- **Styling:** Tailwind CSS v4.
- **Icons:** Lucide-React.
- **Comms:** gRPC-Web or Connect-ES for talking to the backend.

## Update Server (OTA Infrastructure)
- **Backend:** Go 1.22 + Fiber (lightweight HTTP framework).
- **Frontend:** React 19 + Vite + TypeScript + Tailwind v4 (Admin UI).
- **Deployment:** Docker + docker-compose.
- **Port:** 9000 (API + Admin UI).
- **Features:** Git pull, build triggers, release publishing, A/B updates.
- **Storage:** File-based artifact storage with SHA256 verification.
